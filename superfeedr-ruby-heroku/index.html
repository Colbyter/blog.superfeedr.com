<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="google-site-verification" content="ofroHQ3qXBS1SQfblK9-U_oduGZ975Bb3i_uP13Myao" />

  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,400italic|Source+Code+Pro:400,600' rel='stylesheet' type='text/css'>

  <link href="/css/front.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/css/prism.css" rel="stylesheet" type="text/css">

  <title>Superfeedr : Sinatra, Heroku and Superfeedr </title>

  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml">
  <link rel="webmention" href="https://webmention.herokuapp.com/api/webmention" />

  <meta http-equiv="Content-Security-Policy" content="connect-src stream.superfeedr.com">

  <link rel="shortcut icon" href="/favicon.png">

</head>
<body>
  <header class="header">
    <div class="container">
      <h1 class="header-logo"><a href="/"><img src="/images/logo.png" alt=""> <span>Superfeedr Blog</span></a></h1>
      <nav class="nav-header">
        <ul class="nav-items">
          <li class="nav-item"><a href="http://superfeedr.com/about" class="nav-link">About</a></li>
          <li class="nav-item"><a href="http://superfeedr.com/publisher" class="nav-link">Publishers</a></li>
          <li class="nav-item"><a href="http://superfeedr.com/subscriber" class="nav-link">Subscribers</a></li>
          <li class="nav-item"><a href="http://superfeedr.com/subscriber/pricing" class="nav-link">Pricing</a></li>
          <li class="nav-item"><a href="http://superfeedr.com/login" class="nav-link nav-link-bubble">Login</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container body">
    <header class="body-header">
      <div class="blog-links">
        <input type="button" class="button  button--raised  button--positive" value="Subscribe" onclick="(function(){var z=document.createElement('script');z.src='http://www.subtome.com/load.js';document.body.appendChild(z);})()">
        <a href="/archive.html" class="button  button--raised  button--neutral">Read Archives</a>
      </div>
      <h2><strong>Blog</strong></h2>
    </header>

    <div class="body-content">
      <section class="column  column--terms  body-content-text">
        <article class="blog-article blog-article--single h-entry">
  <h3 class="entry-title p-name"><a class="u-url" href="/superfeedr-ruby-heroku">Sinatra, Heroku and Superfeedr</a></h3>

  <span class="invisible u-uid" style="display:none">blog.superfeedr.com:/superfeedr-ruby-heroku</span>

  <div class="entry-meta">
    <ul class="entry-meta--primary postmeta">
      <li class="entry-meta--item">By <span class="p-author h-card"><img class="u-photo" src="http://www.gravatar.com/avatar/b30ce50678f0e934eaa6697425c59dd7?s=20" > <a href="http://ouvre-boite.com" rel="author">Julien</a></span></li>
      <li class="entry-meta--item dt-published" datetime="2012-01-21T00:00:00+01:00"><time>21 Jan 2012</time></li>
    </ul>
  </div>
  <div class="entry-content e-content">
    <p>This is a short tutorial on how to deploy an Sinatra web app that uses Superfeedr to Heroku. This app provides a very simple home page that lists the latests entries of some of your favorites sites. It&#8217;s greatly inspired by the awesome <a href="http://start.io/">start.io</a> from the awesome <a href="http://petervidani.com/">Peter Vidani</a> and <a href="http://jacobbijani.com/">Jacob Bijani</a></p>
<h3>Set up</h3>
<p>We will use <a href="http://www.sinatrarb.com/">Sinatra</a>, the <a href="https://github.com/superfeedr/rack-superfeedr">Rack Superfeedr gem</a>, as well as Twitter&#8217;s bootstrap for the layout, because I suck at making things shinny.</p>
<p>Let&#8217;s start first by creating the application on Heroku.</p>
<p>Create the repo:<br />
<code>
    mkdir start-page &amp;&amp; cd start-page
</code><br />
<code>
    git init
</code><br />
<code>
    git add .
</code><br />
<code>
    git commit -m "init"
</code></p>
<p>Create the application on Heroku:<br />
<code>
    heroku create --stack cedar
</code></p>
<p>Add the hostname as an environment variable. It is used by the rack middleware to build the callback urls:<br />
<code>
    heroku config:add  HOST=&lt;YOUR APP DOMAIN&gt;
</code><br />
Add the superfeedr addon:<br />
<code>
    heroku addons:add superfeedr
</code></p>
<h3>Implementation</h3>
<p>This implementation is minimalistic, feel free to look at the code closely.</p>
<p>Let&#8217;s add the files:<br />
<code>
    touch app.rb
</code><br />
<code>
    touch config.ru
</code><br />
<code>
    touch Gemfile
</code><br />
<code>
    mkdir views/ &amp;&amp; touch views/index.erb
</code></p>
<p>In <code>app.rb</code>:<br />
<script src="https://gist.github.com/1653742.js?file=app.rb"></script></p>
<p>In <code>config.ru</code>:<br />
<script src="https://gist.github.com/1653744.js?file=config.ru"></script></p>
<p>In <code>Gemfile</code>:<br />
<script src="https://gist.github.com/1653748.js?file=Gemfile"></script></p>
<p>In <code>views/index.erb</code>:<br />
<script src="https://gist.github.com/1653753.js?file=index.erb"></script></p>
<p><code>
    git add .
</code><br />
<code>
    git commit -m "implemented" -a
</code></p>
<h3>Deploying</h3>
<p>That&#8217;s the simplest part:</p>
<p>First, let&#8217;s install the gems.<br />
<code>
    bundle install
</code><br />
<code>
    git add Gemfile.lock
</code><br />
<code>
    git commit -m "adding Gemfile.lock" -a
</code></p>
<p>And push the code<br />
<code>
    git push heroku master
</code></p>
<p>&#8230; And that&#8217;s it!</p>
<p>Point your browser to your Heroku application. It is likely that you&#8217;ll have to wait for the feeds you have added to have new content before you see it appear on your home page. The last step is to make this page your default start page in your favorite web browser.</p>
<p>Check <a href="http://floating-sky-5183.herokuapp.com/">mine</a>!</p>
<h2>Gotchas</h2>
<p>Heroku will put this application to sleep if you only use a single dyno&#8230; and since we store the entries in memory for now, that means you&#8217;ll lose that data if the app goes idle. The solution is very simple: store the data, using another <a href="https://addons.heroku.com/">Heroku addon</a>!</p>
<p>Of course, this is a very simple application and there is a ton of little things that one can do to improve it:</p>
<ul>
	<li>add the ability to dynamically subscribe to feeds</li>
	<li>show meta data, like the number of bit.ly clicks on each of the stories</li>
	<li>auto-refresh the page</li>
	<li>&#8230;</li>
</ul>
<p>The <strong>Superfeedr Heroku addon</strong> is still in alpha to this date, so if you want to run, this, please <a href="http://superfeedr.com/about">email us</a> and we&#8217;ll get you in!</p>
  </div>
</article>
<div class="blog-more">
  Liked this post? <a href="/archive.html">Read the archive</a> or <input type="button" value="Subscribe" class="button  button--raised  button--positive" onclick="(function(){var z=document.createElement('script');z.src='http://www.subtome.com/load.js';document.body.appendChild(z);})()">
</div>
<div class="blog-comments">
  <h3>Comments</h3>

    <div id="disqus_thread">
    </div>

    <script type="text/javascript" src="https://disqus.com/forums/superfeedr-thoughts/embed.js"></script>
    <noscript>
        <a href="https://superfeedr-thoughts.disqus.com/?url=ref">View the discussion thread.</a>
    </noscript>

    <script id="webmention-hosted">
    (function () {
      var sn = document.createElement("script"), s = document.getElementsByTagName("script")[0], url;
      url = document.querySelectorAll ? document.querySelectorAll("link[rel~=canonical]") : false;
      url = url && url[0] ? url[0].href : false;
      sn.type = "text/javascript"; sn.async = true;
      sn.src = "//webmention.herokuapp.com/api/embed?url=" + encodeURIComponent(url || window.location);
      s.parentNode.insertBefore(sn, s);
    }());
    </script>
</div>

      </section>
    </div>

  </main>

  <div class="footer container">
    <footer class="site-footer">
      <ul class="site-footer__list">
<!--         <li class="site-footer__item"><a href="" class="site-footer__link">Documentation</a></li>
        <li class="site-footer__item"><a href="" class="site-footer__link">Support</a></li>
        <li class="site-footer__item"><a href="" class="site-footer__link">Blog</a></li>
        <li class="site-footer__item"><a href="/pricing.html" class="site-footer__link">Pricing</a></li>
        <li class="site-footer__item"><a href="" class="site-footer__link">Terms</a></li>
 -->      </ul>
      <ul class="site-footer__meta">
        <p class="site-footer__copyright">&copy; 2009&ndash;2014 Superfeedr</p>
      </ul>
    </footer>
  </div>



  


  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  <!--//--><![CDATA[//><!--
  try {
    var pageTracker = _gat._getTracker('UA-9285763-1');
    pageTracker._setDomainName("superfeedr.com");
    pageTracker._initData();
    pageTracker._trackPageview();
  } catch(err) {}
  //--><!]]>
  </script>

  <script src="/scripts/prism.js"></script>

</body>
</html>



